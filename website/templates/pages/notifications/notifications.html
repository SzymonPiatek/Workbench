{% extends 'base.html' %}

{% block title %} {{ page_title }} {% endblock title %}

{% block content %}
    <div class="block">
        <div class="label">
            <div class="text">{{ page_title }}</div>
        </div>
        <div class="functions">
            <div class="function" onclick="toggleOverlay(this, 'addNotification')">
                <div class="image"><i class="fa-solid fa-plus"></i></div>
                <div class="text">Dodaj powiadomienie</div>
            </div>
        </div>
        <div class="table">
            <table>
                <tr class="sticky">
                    <th>Tytuł</th>
                    <th>Treść</th>
                    <th>Data utworzenia</th>
                    <th>Data początkowa</th>
                    <th>Częstotliwość (dzień)</th>
                    <th>Odbiorcy</th>
                    <th>Status</th>
                </tr>
                {% for notification in notifications %}
                    <tr>
                        <td>{{ notification.title }}</td>
                        <td>{{ notification.message }}</td>
                        <td>{{ notification.formatted_created_at }}</td>
                        <td>{{ notification.formatted_start_date }}</td>
                        <td>{{ notification.frequency }}</td>
                        <td>{{ notification.count_recipients }}</td>
                        <td>{{ notification.is_active_return }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>

    <script>
        function toggleOverlay(button, elementId) {
            const overlayContainer = document.getElementById("overlay_container");
            const elementDiv = document.getElementById(elementId);
            const buttonText = button.querySelector(".text").innerText;
            const overlayTitle = document.getElementById('overlay_title');

            overlayTitle.innerHTML = buttonText;
            overlayContainer.style.display = "flex";
            elementDiv.style.display = "flex";
        }
    </script>
{% endblock content %}